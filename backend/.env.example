# =================================================================
# Card Journey Tracker API - Environment Configuration
# =================================================================

# Server Configuration
NODE_ENV=development
PORT=3001
WS_PORT=8080

# MongoDB Atlas Configuration
# Get your connection string from MongoDB Atlas dashboard
# Format: mongodb+srv://<username>:<password>@<cluster-url>/<database>?retryWrites=true&w=majority
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/card_tracker?retryWrites=true&w=majority

# Security Configuration
# Generate a strong 32+ character encryption key for PII data
# You can generate one using: openssl rand -base64 32
ENCRYPTION_KEY=your-32-character-secret-key-here-change-this-in-production

# API Security
# API key for webhook endpoints (optional but recommended)
API_KEY=your-secure-api-key-for-webhooks

# CORS Configuration
# Frontend URL for CORS (comma-separated for multiple origins)
FRONTEND_URL=http://localhost:3000,https://your-frontend-domain.com

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=combined

# MongoDB Connection Pool Settings (optional)
DB_MAX_POOL_SIZE=10
DB_MIN_POOL_SIZE=2
DB_CONNECT_TIMEOUT_MS=10000
DB_SOCKET_TIMEOUT_MS=0

# Analytics Configuration
ANALYTICS_CRON_SCHEDULE=0 * * * *
BOTTLENECK_THRESHOLD_MINUTES=480
ALERT_EMAIL_ENABLED=false
ALERT_EMAIL_FROM=alerts@yourcompany.com
ALERT_EMAIL_TO=admin@yourcompany.com

# WebSocket Configuration
WS_HEARTBEAT_INTERVAL=30000
WS_MAX_CONNECTIONS=1000

# Performance Configuration
REQUEST_TIMEOUT_MS=30000
MAX_REQUEST_SIZE=10mb

# External Service Configuration (for webhooks)
EMBOSSING_SERVICE_URL=https://embossing.yourpartner.com
LOGISTICS_PARTNER_URL=https://logistics.yourpartner.com

# Monitoring and Health Checks
HEALTH_CHECK_INTERVAL=60000
METRICS_ENABLED=true

# Development/Testing Settings
SEED_DATA_ON_START=false
ENABLE_API_DOCS=true
MOCK_EXTERNAL_SERVICES=false

# Production Security Settings
HELMET_ENABLED=true
TRUST_PROXY=false
SECURE_COOKIES=true

# Cache Configuration (if using external cache in future)
# REDIS_URL=redis://localhost:6379
# CACHE_TTL=300

# Email Configuration (for alerts)
# SMTP_HOST=smtp.yourprovider.com
# SMTP_PORT=587
# SMTP_USER=your-smtp-username
# SMTP_PASS=your-smtp-password

# Webhook Retry Configuration
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_RETRY_DELAY=5000

# File Upload Configuration (if needed)
MAX_FILE_SIZE=5mb
UPLOAD_PATH=./uploads

# Timezone
TZ=Asia/Kolkata

# =================================================================
# Instructions:
# 1. Copy this file to .env: cp .env.example .env
# 2. Replace all placeholder values with your actual configuration
# 3. Never commit .env file to version control
# 4. Ensure your MongoDB Atlas cluster allows connections from your IP
# 5. Generate a strong encryption key for production use
# =================================================================